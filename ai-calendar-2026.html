<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gallery</title>
  <style>
    :root { color-scheme: light dark; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    header { position: sticky; top: 0; backdrop-filter: blur(10px); padding: 14px 16px; border-bottom: 1px solid rgba(127,127,127,.25); }
    header h1 { margin: 0; font-size: 16px; font-weight: 700; }
    header .sub { margin-top: 6px; font-size: 12px; opacity: .75; display: flex; gap: 12px; flex-wrap: wrap; }
    main { padding: 16px; }

.grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr); /* 기본은 3열 */
  gap:16px;
  padding:20px;
}

/* 카드 자체도 살짝 크고 안정적으로 */
.card{
  border:1px solid rgba(127,127,127,.25);
  border-radius:14px;
  overflow:hidden;
}

.card img{
  width:100%;
  height:auto;                 /* 혹시 남아있을 고정 높이 제거 */
  aspect-ratio: 4 / 3;         /* 4:3 유지 */
  object-fit: cover;
  display:block;
}

    .card { border-radius: 14px; overflow: hidden; border: 1px solid rgba(127,127,127,.25); background: rgba(127,127,127,.06); }
    .card button { all: unset; display: block; cursor: zoom-in; width: 100%; }
    .cap { padding: 10px 12px; font-size: 12px; opacity: .85; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .overlay { position: fixed; inset: 0; background: rgba(0,0,0,.75); display: none; align-items: center; justify-content: center; padding: 18px; }
    .overlay.open { display: flex; }
    .viewer { max-width: min(1200px, 96vw); max-height: 90vh; position: relative; }
    .viewer img { max-width: 100%; max-height: 90vh; display: block; border-radius: 14px; }
    .bar { position: absolute; left: 0; right: 0; top: -44px; display: flex; align-items: center; justify-content: space-between; color: #fff; font-size: 13px; }
    .bar .btn { cursor: pointer; padding: 8px 10px; border-radius: 10px; background: rgba(255,255,255,.12); user-select: none; }
    .nav { position: absolute; top: 50%; transform: translateY(-50%); color: #fff; font-size: 20px; }
    .nav.left { left: -52px; }
    .nav.right { right: -52px; }
@media (max-width: 420px){
  .grid{
    grid-template-columns: 1fr;  /* 폰에서는 1열 */
    padding:14px;
  }
}
/* 화면이 줄면 열 수도 줄어들게 */
@media (max-width: 1100px){
  .grid{ grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 700px){
  .grid{ grid-template-columns: 1fr; }
}

  </style>
</head>
<body>
  <header>
    <h1>Image Gallery</h1>
    <div class="sub">
      <span id="count">0 images</span>
      <span>Click to zoom • ←/→ to navigate • ESC to close</span>
    </div>
  </header>

  <main>
    <div class="grid" id="grid"></div>
  </main>

  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="viewer">
      <div class="bar">
        <div id="label"></div>
        <div class="btn" id="closeBtn">Close ✕</div>
      </div>
      <div class="btn nav left" id="prevBtn" title="Prev">←</div>
      <img id="big" alt="" />
      <div class="btn nav right" id="nextBtn" title="Next">→</div>
    </div>
  </div>

  <script>
    // ✅ 여기 파일명만 실제 이미지에 맞춰주세요
    const files = Array.from({length: 14}, (_, i) => '_' + String(i + 1).padStart(5, '0') + '.jpg');

    const grid = document.getElementById('grid');
    const count = document.getElementById('count');
    const overlay = document.getElementById('overlay');
    const big = document.getElementById('big');
    const label = document.getElementById('label');
    const closeBtn = document.getElementById('closeBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    count.textContent = `${files.length} images`;

    let idx = 0;

    function openViewer(i) {
      idx = i;
      const f = files[idx];
      big.src = `images/${f}`;
      big.alt = f;
      label.textContent = `${idx + 1} / ${files.length} — ${f}`;
      overlay.classList.add('open');
      overlay.setAttribute('aria-hidden', 'false');
    }
    function closeViewer() {
      overlay.classList.remove('open');
      overlay.setAttribute('aria-hidden', 'true');
      big.src = '';
    }
    function prev() { openViewer((idx - 1 + files.length) % files.length); }
    function next() { openViewer((idx + 1) % files.length); }

    files.forEach((f, i) => {
      const card = document.createElement('div');
      card.className = 'card';

      const btn = document.createElement('button');
      btn.addEventListener('click', () => openViewer(i));

      const img = document.createElement('img');
      img.loading = 'lazy';
      img.src = `images/${f}`;
      img.alt = f;

      const cap = document.createElement('div');
      cap.className = 'cap';
      cap.textContent = f;

      btn.appendChild(img);
      card.appendChild(btn);
      card.appendChild(cap);
      grid.appendChild(card);
    });

    closeBtn.addEventListener('click', closeViewer);
    overlay.addEventListener('click', (e) => { if (e.target === overlay) closeViewer(); });
    prevBtn.addEventListener('click', prev);
    nextBtn.addEventListener('click', next);

    window.addEventListener('keydown', (e) => {
      if (!overlay.classList.contains('open')) return;
      if (e.key === 'Escape') closeViewer();
      if (e.key === 'ArrowLeft') prev();
      if (e.key === 'ArrowRight') next();
    });
  </script>
</body>
</html>